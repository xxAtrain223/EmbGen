<appendage name='Servo'>
    <include>Servo.h</include>
    <variable type='Servo' name='servo' />
    <variable type='uint8_t' name='pin' />
    <variable type='uint8_t' name='init_value' core='true' />
    <setup>
        <code insert='each'>
            servo.attach(pin); // Use the variable name defined above
            servo.write(init_value);
        </code>
        <code insert='once'>
            delay(500);
        </code>
        <code insert='each'>
            servo.detach();
        </code>
    </setup>
    <command name='set'>
        <parameter type='uint8_t' name='value' max='180' />
        <code>
            if (!servo.attached()) {
                servo.attach(pin);
            }
            servo.write(value);
        </code>
    </command>
    <command name='get'>
        <return_value type='uint8_t' name='value' />
        <code>
            value = servo.read();
        </code>
    </command>
    <command name='detach'>
        <code>
            servo.detach();
        </code>
    </command>
    <!--<stop command='detach' />-->
    <stop>
        <code>
            servo.detach();
        </code>
    </stop>
</appendage>